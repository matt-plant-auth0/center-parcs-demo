window._g=window._g||{};_g.shared={};void 0===window.console&&(window.console={log:function(c){}});
_g.shared.HTTP=new function(){var c=function(){return{headers:{},body:{}}},d=function(a){if(!a)return null;var b=c();b.body=a.responseText;b.headers[_g.HTTP.HEADER_STATUS]=a.status;b.responseText=a.responseText;b.status=a.status;return b};return{EXTENSION_HTML:".html",EXTENSION_JSON:".json",EXTENSION_RES:".res",HEADER_STATUS:"Status",HEADER_MESSAGE:"Message",HEADER_LOCATION:"Location",HEADER_PATH:"Path",PARAM_NO_CACHE:"cq_ck",get:function(a,b,e,f){a=_g.HTTP.getXhrHookedURL(_g.HTTP.externalize(a,!0));
if(void 0!=b)return _g.$.ajax({type:"GET",url:a,externalize:!1,encodePath:!1,hook:!1,complete:function(k,l){k=d(k);f||_g.HTTP.handleForbidden(k);b.call(e||this,this,"success"==l,k)}});try{var h=_g.$.ajax({type:"GET",url:a,async:!1,externalize:!1,encodePath:!1,hook:!1}),g=d(h);f||_g.HTTP.handleForbidden(g);return g}catch(k){return null}},post:function(a,b,e,f,h,g){a=_g.HTTP.externalize(a,!0);if(h=_g.HTTP.getXhrHook(a,"POST",e))a=h.url,e=h.params;if(void 0!=b)return _g.$.ajax({type:"POST",url:a,data:e,
externalize:!1,encodePath:!1,hook:!1,complete:function(m,p){var q=_g.HTTP.buildPostResponseFromHTML(m.responseText);g||_g.HTTP.handleForbidden(m);b.call(f||this,this,"success"==p,q)}});try{var k=_g.$.ajax({type:"POST",url:a,data:e,async:!1,externalize:!1,encodePath:!1,hook:!1}),l=_g.HTTP.buildPostResponseFromHTML(k.responseText);g||_g.HTTP.handleForbidden(k);return l}catch(m){return null}},getParameter:function(a,b){a=_g.HTTP.getParameters(a,b);return null!=a?a[0]:null},getParameters:function(a,b){var e=
[];if(!b)return null;b=encodeURIComponent(b);if(-1==a.indexOf("?"))return null;-1!=a.indexOf("#")&&(a=a.substring(0,a.indexOf("#")));a=a.substring(a.indexOf("?")+1);if(-1==a.indexOf(b))return null;a=a.split("\x26");for(var f=0;f<a.length;f++){var h=a[f].split("\x3d");h[0]==b&&e.push(1<h.length?decodeURIComponent(h[1]):"")}return 0<e.length?e:null},addParameter:function(a,b,e){if(e&&e instanceof Array){for(var f=0;f<e.length;f++)a=_g.HTTP.addParameter(a,b,e[f]);return a}f=-1==a.indexOf("?")?"?":"\x26";
var h=a.indexOf("#");if(0>h)return a+f+encodeURIComponent(b)+"\x3d"+encodeURIComponent(e);var g=a.substring(h);a=a.substring(0,h);return a+f+encodeURIComponent(b)+"\x3d"+encodeURIComponent(e)+g},setParameter:function(a,b,e){a=_g.HTTP.removeParameter(a,b);return _g.HTTP.addParameter(a,b,e)},removeParameter:function(a,b){var e="?"+encodeURIComponent(b)+"\x3d";b="\x26"+encodeURIComponent(b)+"\x3d";if(-1==a.indexOf(e))if(-1!=a.indexOf(b))e=b;else return a;b=a.indexOf(e);e=a.substring(0,b);b=a.indexOf("\x26",
b+1);var f="";-1!=b&&(f=a.substring(b),0==f.indexOf("\x26")&&(f=f.replace("\x26","?")));return e+f},removeParameters:Granite.HTTP.removeParameters,addSelector:function(a,b,e){e||(e=0);var f="",h=a.indexOf("?");-1==h&&(h=a.indexOf("#"));-1!=h&&(f=a.substring(h),a=a.substring(0,h));var g=a.lastIndexOf("/");h=a.substring(g);if(-1==h.indexOf("."+b+".")){a=a.substring(0,g);h=h.split(".");var k=g="";if(e>h.length-2||-1==e)e=h.length-2;for(var l=0;l<h.length;l++)g+=k+h[l],k=".",e==l&&(g+=k+b);return a+g+
f}return a},setSelector:function(a,b,e){var f="",h=a.indexOf("?");-1==h&&(h=a.indexOf("#"));-1!=h&&(f=a.substring(h),a=a.substring(0,h));h=_g.HTTP.getSelectors(a);var g=a.substring(a.lastIndexOf("."));a=a.substring(0,a.lastIndexOf("."));a=0<h.length?a.replace("."+h.join("."),""):a;if(0<h.length)for(var k=0;k<h.length;k++)a=e==k?a+("."+b):a+("."+h[k]);else a+="."+b;return a+g+f},addSelectors:function(a,b){var e=a;if(a&&b&&b.length)for(a=0;a<b.length;a++)e=_g.HTTP.addSelector(e,b[a],a);return e},getAnchor:function(a){return-1!=
a.indexOf("#")?a.substring(a.indexOf("#")+1):""},setAnchor:function(a,b){return _g.HTTP.removeAnchor(a)+"#"+b},removeAnchor:Granite.HTTP.removeAnchor,noCaching:function(a){return _g.HTTP.setParameter(a,_g.HTTP.PARAM_NO_CACHE,(new Date).valueOf())},buildPostResponseFromNode:function(a,b){if(!a)return null;void 0==b&&(b=c());for(var e=0;e<a.childNodes.length;e++){var f=a.childNodes[e];f.tagName&&(f.id&&(b.headers[f.id]=f.href?f.href:f.innerHTML),b=_g.HTTP.buildPostResponseFromNode(f,b))}return b},buildPostResponseFromHTML:function(a){var b=
c();try{void 0!=a.responseText?a=a.responseText:"string"!=typeof a&&(a=a.toString());var e=document.createElement("div");e.innerHTML=a;b=_g.HTTP.buildPostResponseFromNode(e,b)}catch(f){}return b},getCookie:function(a){var b=encodeURIComponent(a)+"\x3d";a=document.cookie;if(0<a.length){var e=a.indexOf(b);if(-1!=e)return e+=b.length,b=a.indexOf(";",e),-1==b&&(b=a.length),decodeURIComponent(a.substring(e,b))}return null},setCookie:function(a,b,e,f,h,g){"number"!=typeof f&&(f=7);if(0<f){var k=new Date;
k.setTime(k.getTime()+864E5*f)}else k=new Date(0);document.cookie=encodeURIComponent(a)+"\x3d"+encodeURIComponent(b)+"; "+(0!=f?"expires\x3d"+k.toGMTString()+"; ":"")+(h?"domain\x3d"+h+"; ":"")+(e?"path\x3d"+e:"")+(g?"; secure":"");return b},clearCookie:function(a,b,e,f){_g.HTTP.setCookie(a,"null",b||"",-1,e||"",f||"")},getSchemeAndAuthority:Granite.HTTP.getSchemeAndAuthority,getContextPath:Granite.HTTP.getContextPath,externalize:function(a,b){if("undefined"!=typeof G_IS_HOOKED&&G_IS_HOOKED(a))return a;
b&&(a=_g.HTTP.encodePathOfURI(a));return a=Granite.HTTP.externalize(a)},internalize:Granite.HTTP.internalize,getPath:Granite.HTTP.getPath,getSuffix:function(){return window.CQURLInfo&&CQURLInfo.suffix?CQURLInfo.suffix:null},getSelectors:function(a){if(!a&&window.CQURLInfo&&CQURLInfo.selectors)return CQURLInfo.selectors;var b=[];a=a||window.location.href;a=_g.HTTP.removeParameters(a);a=_g.HTTP.removeAnchor(a);if(a=a.substring(a.lastIndexOf("/")))if(a=a.split("."),2<a.length)for(var e=0;e<a.length;e++)0<
e&&e<a.length-1&&b.push(a[e]);return b},getExtension:function(a){if(!a&&window.CQURLInfo&&CQURLInfo.extension)return CQURLInfo.extension;a=a||window.location.href;a=_g.HTTP.removeParameters(a);a=_g.HTTP.removeAnchor(a);var b=a.lastIndexOf(".");if(0>b)return"";a=a.substring(b+1);b=a.indexOf("/");return 0>b?a:a.substring(0,b)},encodePathOfURI:Granite.HTTP.encodePathOfURI,encodePath:Granite.HTTP.encodePath,eval:Granite.HTTP.eval,isOkStatus:function(a){try{return 0==(new String(a)).indexOf("2")}catch(b){return!1}},
isOk:function(a){try{return _g.HTTP.isOkStatus(a.headers[_g.HTTP.HEADER_STATUS])}catch(b){return!1}},handleForbidden:function(a,b){try{return 403==a[_g.HTTP.HEADER_STATUS.toLowerCase()]?(Granite.HTTP.handleLoginRedirect(),!0):!1}catch(e){return!1}},getXhrHook:Granite.HTTP.getXhrHook,getXhrHookedURL:function(a,b,e){return(b=_g.HTTP.getXhrHook(a,b,e))?b.url:a},reloadHook:function(a){"undefined"!=typeof G_RELOAD_HOOK&&_g.$.isFunction(G_RELOAD_HOOK)&&(""!=CQURLInfo.selectorString&&(a=_g.HTTP.addSelector(a,
CQURLInfo.selectorString)),a=G_RELOAD_HOOK(a)||a);return a}}};_g.HTTP=_g.shared.HTTP;
_g.shared.Util=new function(){return{reload:function(c,d,a){c||(c=window);d||(d=_g.HTTP.noCaching(c.location.href));d=_g.HTTP.reloadHook(d);a?c.location.replace(d):c.location.href=d},load:function(c,d){_g.Util.reload(window,c,d)},open:function(c,d,a,b){d||(d=window);if(c)return c=_g.HTTP.reloadHook(c),a||(a=""),b||(b=""),d.open(c,a,b)},htmlEncode:function(c){return c?String(c).replace(/&/g,"\x26amp;").replace(/>/g,"\x26gt;").replace(/</g,"\x26lt;").replace(/"/g,"\x26quot;"):c},htmlDecode:function(c){return c?
String(c).replace(/&gt;/g,"\x3e").replace(/&lt;/g,"\x3c").replace(/&quot;/g,'"').replace(/&amp;/g,"\x26"):c},ellipsis:function(c,d,a){if(c&&c.length>d){if(a){a=c.substr(0,d-2);var b=Math.max(a.lastIndexOf(" "),a.lastIndexOf("."),a.lastIndexOf("!"),a.lastIndexOf("?"),a.lastIndexOf(";"));return-1==b||b<d-15?c.substr(0,d-3)+"...":a.substr(0,b)+"..."}return c.substr(0,d-3)+"..."}return c},patchText:Granite.Util.patchText,eval:function(c){return _g.HTTP.eval(c)},getTopWindow:Granite.Util.getTopWindow,
setIFrameMode:Granite.Util.setIFrameMode}};_g.Util=_g.shared.Util;
_g.shared.Sling=function(){return{SELECTOR_INFINITY:Granite.Sling.SELECTOR_INFINITY,CHARSET:Granite.Sling.CHARSET,STATUS:Granite.Sling.STATUS,STATUS_BROWSER:Granite.Sling.STATUS_BROWSER,OPERATION:Granite.Sling.OPERATION,OPERATION_DELETE:Granite.Sling.OPERATION_DELETE,OPERATION_MOVE:Granite.Sling.OPERATION_MOVE,DELETE_SUFFIX:Granite.Sling.DELETE_SUFFIX,TYPEHINT_SUFFIX:Granite.Sling.TYPEHINT_SUFFIX,COPY_SUFFIX:Granite.Sling.COPY_SUFFIX,MOVE_SUFFIX:Granite.Sling.MOVE_SUFFIX,ORDER:Granite.Sling.ORDER,
REPLACE:Granite.Sling.REPLACE,DESTINATION:Granite.Sling.DESTINATION,SAVE_PARAM_PREFIX:Granite.Sling.SAVE_PARAM_PREFIX,IGNORE_PARAM:Granite.Sling.IGNORE_PARAM,REQUEST_LOGIN_PARAM:Granite.Sling.REQUEST_LOGIN_PARAM,LOGIN_URL:Granite.Sling.LOGIN_URL,LOGOUT_URL:Granite.Sling.LOGOUT_URL,processBinaryData:function(c){if(c&&void 0!=c[":jcr:data"]){var d={};d.size=c[":jcr:data"];d.type=c["jcr:mimeType"];d.date=c["jcr:lastModified"];c=d}return c},getContentPath:function(c,d,a){d.lastIndexOf(".")>d.lastIndexOf("/")&&
(d=d.substr(0,d.indexOf(".",d.lastIndexOf("/"))));if(c)if(0==c.indexOf("/"))d=c;else{if(a)for(;0==c.indexOf("../");)c=c.substring(3),d=d.substring(0,d.lastIndexOf("/"));c=c.replace("./","");d=d+"/"+c}return d}}}();_g.Sling=_g.shared.Sling;
_g.shared.XSS=new function(){return{getXSSPropertyName:function(c){return c?_g.XSS.KEY_REGEXP.test(c)?c:c+_g.XSS.KEY_SUFFIX:""},getXSSRecordPropertyValue:function(c,d,a){var b="";c&&d&&(b=(b=c.get(this.getXSSPropertyName(d)))?b:this.getXSSValue(c.get(d)),a&&!isNaN(a)&&(b=_g.Util.ellipsis(b,a,!0)));return b},getXSSTablePropertyValue:function(c,d,a){var b="";c&&d&&(b=(b=c[this.getXSSPropertyName(d)])?b:this.getXSSValue(c[d]),a&&!isNaN(a)&&(b=_g.Util.ellipsis(b,a,!0)));return b},getXSSValue:function(c){return c?
_g.Util.htmlEncode(c):""},updatePropertyName:function(c,d){c&&d&&c[d]&&c.xssProtect&&!c.xssKeepPropName&&(c[d]=this.getXSSPropertyName(c[d]))},xssPropertyRenderer:function(c,d,a,b){return b&&b.dataIndex&&a&&a.data&&a.data[this.getXSSPropertyName(b.dataIndex)]?(c=a.data[this.getXSSPropertyName(b.dataIndex)],b.ellipsisLimit&&!isNaN(b.ellipsisLimit)&&(c=_g.Util.ellipsis(c,b.ellipsisLimit,!0)),c):c?c:""}}};_g.XSS=_g.shared.XSS;_g.XSS.KEY_SUFFIX="_xss";_g.XSS.KEY_REGEXP=new RegExp(_g.XSS.KEY_SUFFIX+"$");
_g.shared.I18n=Granite.I18n;_g.I18n=_g.shared.I18n;_g.shared.I18n.getMessage=Granite.I18n.get;_g.shared.I18n.getVarMessage=Granite.I18n.getVar;
_g.shared.String=new function(){return{startsWith:function(c,d){return null==c||null==d?null==c&&null==d:d.length>c.length?!1:0==c.toString().indexOf(d.toString())},endsWith:function(c,d){if(null==c||null==d)return null==c&&null==d;if(d.length>c.length)return!1;c=c.toString();d=d.toString();return c.lastIndexOf(d)==c.length-d.length},contains:function(c,d){if(null==c||null==d)return!1;c=c.toString();d=d.toString();return 0<=c.indexOf(d)}}};_g.String=_g.shared.String;
_g.shared.ClientSidePersistence=function(c){var d={PERSISTENCE_NAME:_g.shared.ClientSidePersistence.decoratePersistenceName("ClientSidePersistence"),config:{},cache:null,getMode:function(){return this.config.mode},getWindow:function(){return this.config.window||_g.shared.Util.getTopWindow()},debug:function(){if(console){for(var b=this.getMap(),e="[ClientSidePersistence -\x3e mode\x3d"+this.getMode().name+", container\x3d"+(this.config.container||"")+"]\n",f=0,h=new RegExp("^"+this.config.container+
"/"),g=0,k=Object.keys(b).sort();g<k.length;g++){var l=k[g];if(!this.config.container||"string"!=typeof l||l.match(h)){var m=b[l];e+="-["+ ++f+"]-\x3e '"+l.replace(h,"")+"' \x3d '"+decodeURIComponent(m)+"'\n"}}f||(e+="(container is empty)");console.log(e)}},keyName:function(b){return(this.config.container?this.config.container+"/":"")+b},getKeys:function(){var b=this.getMap(),e=[];if(b)for(var f in b)this.config.container?0==f.indexOf(this.config.container+"/")&&(b=f.substring(this.config.container.length+
1),e.push(b)):e.push(f);return e},get:function(b){return(b=this.getMap()[this.keyName(b)])?decodeURIComponent(b):b},set:function(b,e){b="string"===typeof b?b.replace(/:=/g,""):"";var f={key:b};b=this.keyName(b);if(b.length){var h=[],g=this.getMap();f.action=g[b]?"update":"set";e?g[b]=encodeURIComponent(e):(f.action="remove",delete g[b]);for(var k in g)h.push(k+":\x3d"+g[k]);this.cache=g;this.write(h.join("|"));_g.$.extend(f,{value:e,mode:this.getMode().name,container:this.config.container});_g.$(_g.shared.ClientSidePersistence).trigger(_g.shared.ClientSidePersistence.EVENT_NAME,
f)}},getMap:function(){if(!this.cache||!this.config.useCache){for(var b=this.read().split("|"),e={},f=0;f<b.length;f++){var h=b[f].split(":\x3d"),g=h[0];g&&g.length&&(e[g]=h[1]||"")}this.cache=e}return this.cache},remove:function(b){this.set(b)},clearMap:function(){this.write()},read:function(){return this.config.mode.read(this)||""},write:function(b){this.config.mode.write(this,b||"")}};_g.$.extend(d.config,_g.shared.ClientSidePersistence.getDefaultConfig(),c);!1===d.config.useContainer&&(d.config.container=
null);var a="test-"+Math.random();if(d.config.mode===_g.shared.ClientSidePersistence.MODE_SESSION){c=!1;try{window.sessionStorage.setItem(a,a),window.sessionStorage.removeItem(a)}catch(b){c=!0}c&&(d.config.mode=_g.shared.ClientSidePersistence.MODE_LOCAL)}if(d.config.mode===_g.shared.ClientSidePersistence.MODE_LOCAL){c=!1;try{window.localStorage.setItem(a,a),window.localStorage.removeItem(a)}catch(b){c=!0}c&&(d.config.mode=_g.shared.ClientSidePersistence.MODE_WINDOW)}return d};
_g.shared.ClientSidePersistence.EVENT_NAME="ClientSidePersistence";_g.shared.ClientSidePersistence.MODE_SESSION={name:"session",read:function(c){return c.getWindow().sessionStorage.getItem(c.PERSISTENCE_NAME)},write:function(c,d){if(!Granite.OptOutUtil.isOptedOut())try{c.getWindow().sessionStorage.setItem(c.PERSISTENCE_NAME,d)}catch(a){}}};
_g.shared.ClientSidePersistence.MODE_LOCAL={name:"local",read:function(c){return c.getWindow().localStorage.getItem(c.PERSISTENCE_NAME)},write:function(c,d){if(!Granite.OptOutUtil.isOptedOut())try{c.getWindow().localStorage.setItem(c.PERSISTENCE_NAME,d)}catch(a){}}};_g.shared.ClientSidePersistence.decoratePersistenceName=function(c){return c};
_g.shared.ClientSidePersistence.MODE_WINDOW={name:"window",read:function(c){return c.getWindow().name},write:function(c,d){Granite.OptOutUtil.isOptedOut()||(c.getWindow().name=d)}};
_g.shared.ClientSidePersistence.MODE_COOKIE={COOKIE_NAME:_g.shared.ClientSidePersistence.decoratePersistenceName("SessionPersistence"),name:"cookie",read:function(c){return _g.shared.ClientSidePersistence.CookieHelper.read(this.COOKIE_NAME)},write:function(c,d){if(!Granite.OptOutUtil.isOptedOut()||Granite.OptOutUtil.maySetCookie(this.COOKIE_NAME))d?_g.shared.ClientSidePersistence.CookieHelper.set(this.COOKIE_NAME,d,365):_g.shared.ClientSidePersistence.CookieHelper.erase(this.COOKIE_NAME)}};
_g.shared.ClientSidePersistence.getDefaultConfig=function(){return{window:_g.shared.Util.getTopWindow(),useCache:!1,container:null,mode:_g.shared.ClientSidePersistence.MODE_LOCAL}};
_g.shared.ClientSidePersistence.CookieHelper={set:function(c,d,a){var b="";a&&(b=new Date,b.setTime(b.getTime()+864E5*a),b="; expires\x3d"+b.toGMTString());d&&(d=encodeURIComponent(d));document.cookie=c+"\x3d"+d+b+"; path\x3d/"},read:function(c){c+="\x3d";for(var d=document.cookie.split(";"),a=0;a<d.length;a++){for(var b=d[a];" "==b.charAt(0);)b=b.substring(1,b.length);if(0==b.indexOf(c))return(c=b.substring(c.length,b.length))?decodeURIComponent(c):null}return null},erase:function(c){_g.shared.ClientSidePersistence.CookieHelper.set(c,
"",-1)}};_g.shared.ClientSidePersistence.clearAllMaps=function(){_g.$.each([_g.shared.ClientSidePersistence.MODE_COOKIE,_g.shared.ClientSidePersistence.MODE_LOCAL,_g.shared.ClientSidePersistence.MODE_SESSION,_g.shared.ClientSidePersistence.MODE_WINDOW],function(c,d){(new _g.shared.ClientSidePersistence({mode:d})).clearMap()})};_g.I18n.init();window.CQ=window.CQ||{};CQ.shared=_g.shared;CQ.Sling=CQ.shared.Sling;CQ.I18n=CQ.shared.I18n;G_XHR_HOOK="undefined"!=typeof CQ_XHR_HOOK?CQ_XHR_HOOK:void 0;
G_RELOAD_HOOK="undefined"!=typeof CQ_RELOAD_HOOK?CQ_RELOAD_HOOK:void 0;G_IS_HOOKED="undefined"!=typeof CQ_IS_HOOKED?CQ_IS_HOOKED:void 0;G_CONTENT_PATH="undefined"!=typeof CQ_CONTENT_PATH?CQ_CONTENT_PATH:void 0;
CQ.shared.Form=function(){var c=function(){for(var e={},f=document.getElementsByTagName("label"),h=0;h<f.length;h++){var g=f[h].htmlFor;g&&(e[g]=f[h])}return e},d=function(e){var f="",h=function(g){3==g.nodeType&&(f+=g.nodeValue);if("select"!=g.nodeName.toLowerCase()&&"input"!=g.nodeName.toLowerCase()&&"textarea"!=g.nodeName.toLowerCase()&&"button"!=g.nodeName.toLowerCase())for(var k=0;g.childNodes&&k<g.childNodes.length;k++)h(g.childNodes[k])};h(e);return f},a=function(e){var f,h=e.nodeName.toLowerCase(),
g=b(e,"type")?e.getAttribute("type"):void 0;"input"==h?"radio"==g||"checkbox"==g?b(e,"checked")&&(f=e.getAttribute("value")):f="text"==e.type?e.defaultValue:e.value:"textarea"==h?f=e.value:"option"==h&&b(e,"selected")&&(f=e.getAttribute("value"));return f},b=function(e,f){return null==e?!1:void 0!=$CQ(e).attr(f)};return{searchArray:function(e,f,h){for(var g=0;g<e.length;g++)if(e[g][f]&&e[g][f]==h)return e[g];return null},getLabelForField:function(e,f){f||(f=c());var h=e.getAttribute("id");if(h&&f[h])return d(f[h]);
for(f=e.parentNode;f;){if("label"==f.nodeName.toLowerCase())return d(f);f=f.parentNode}return e.getAttribute("name")},getFields:function(){var e=c(),f=[],h=function(g,k){"div"==g.nodeName.toLowerCase()&&$CQ(g).hasClass("section")&&(k=!0);if(g.getAttribute&&g.getAttribute("name")){var l=k,m=g.getAttribute("name"),p=g.nodeName.toLowerCase();if("input"==p||"textarea"==p){var q=b(g,"type")?g.getAttribute("type").toLowerCase():"text";if("button"!=q&&"submit"!=q&&"reset"!=q){var n=CQ.shared.Form.searchArray(f,
"value",m);n||(f.push({text:CQ.shared.Form.getLabelForField(g,e),value:m,name:m,enumeration:void 0,local:l,type:p,defaultValue:a(g),node:g}),n=f[f.length-1]);if("radio"==q||n.local&&"checkbox"==q)n.enumeration||((l=g.getAttribute("id"))?(l=l.replace(/-\d+$/,""),(p=e)||(p=c()),l=p[l]?d(p[l]):null,n.text=l?l:m):n.text=m,n.enumeration=[]),n.enumeration.push({text:CQ.shared.Form.getLabelForField(g,e),value:g.getAttribute("value"),defaultValue:a(g),node:g})}}else if("select"==p)for(f.push({text:CQ.shared.Form.getLabelForField(g,
e),value:m,name:m,enumeration:[],local:l,type:p,defaultValue:void 0,node:g}),n=f[f.length-1],m=g.getElementsByTagName("option"),l=0;l<m.length;l++)n.enumeration.push({text:m[l].innerHTML,value:m[l].getAttribute("value"),defaultValue:a(m[l]),node:m[l]})}for(n=0;g.childNodes&&n<g.childNodes.length;n++)m=g.childNodes[n],1==m.nodeType&&h(m,k)};h(document,!1);return f}}}();
CQ.shared.User=function(c){return{data:null,language:null,userPropsPath:null,getUserPropsUrl:function(){this.userPropsPath||(this.userPropsPath=CQ.shared.User.PROXY_URI);return this.userPropsPath},load:function(){var d=this.getUserPropsUrl();d=CQ.shared.HTTP.noCaching(d);d=CQ.shared.HTTP.get(d);CQ.shared.HTTP.isOk(d)&&(this.data=CQ.shared.Util.eval(d))},init:function(d,a){if(!this.initialized||a)d?this.data=d:this.load(),this.initialized=!0;return this.data},lazyInit:function(){this.lazyLoad=function(){this.load();
this.initialized=!0}},isInitialized:function(){return this.initialized},getLanguage:function(){!this.isInitialized()&&this.lazyLoad&&this.lazyLoad.call(this);return this.language=this.data&&this.data.preferences&&this.data.preferences.language?this.data.preferences.language:"en"}}}();CQ.shared.User.PROXY_URI=CQ.shared.HTTP.externalize("/libs/cq/security/userinfo"+CQ.shared.HTTP.EXTENSION_JSON);CQ.shared.User.lazyInit();
CQ.shared.I18n.init({locale:function(){return document.documentElement.lang||CQ.shared.User.getLanguage()},urlPrefix:"/libs/cq/i18n/dict."});